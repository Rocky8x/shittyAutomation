<html>
   <head>
      <title>Result</title>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
      <style>	
         body {
         font-family: Verdana, Geneva, sans-serif;
         }
         table, th, td {			
         white-space: nowrap;				
         }        
         #myInput, #myInputResult {			
         background-position: 10px 12px; /* Position the search icon */
         background-repeat: no-repeat; /* Do not repeat the icon image */
         width: 15%; /* Full-width */
         font-size: 12px; /* Increase font-size */
         padding: 5px 9px 5px 19px; /* Add some padding */
         border: 1px solid #ddd; /* Add a grey border */
         margin-bottom: 5px; /* Add some space below the input */
         }
         #myTable {
         border-collapse: collapse; /* Collapse borders */
         width: 100%; /* Full-width */
         border: 1px solid #ddd; /* Add a grey border */
         font-size: 13px; /* Increase font-size */	
         background-color: #f3f0ed;		 		 
         }
         #myTable th {
         text-align: center;	
         background-color: #47839e;
         color: white;		 
         }		 
         #myTable th, #myTable td {			
         padding: 8px; /* Add padding */			
		 border: 1px solid #ddd;
         }
         #myTable tr {
         /* Add a bottom border to all table rows */
         border-bottom: 1px solid #ddd; 
         }
         #myTable tr.header, #myTable tr:hover {
         /* Add a grey background color to the table header and on hover */
         background-color: #FDF1C6;
         }				
		 #myTable tr.clicked {
			background-color: #EDB81E;
	     }
         #mySummary {
         border-collapse: collapse; /* Collapse borders */
         border: 1px solid #ddd; /* Add a grey border */
         font-size: 13px; /* Increase font-size */		
         background-color: antiquewhite;		 
         }
         #mySummary th, #myTable td {			
         padding: 8px; /* Add padding */			
         }
         #mySummary th {			
         text-align: center;	
         background-color: #00730b;
         color: white;			
         }
         #mySummary td {			
         text-align: center;			        
         }
         #mySummary tr {
         /* Add a bottom border to all table rows */
         border-bottom: 1px solid #ddd; 
         }
         #mySummary th, #mySummary td {			
         padding-left: 8px; /* Add padding */		
         padding-right: 8px; /* Add padding */		         	
		 border: 1px solid #ddd;
         }
      </style>
      <script type="text/javascript">
         $(document).ready(function(){
			 $('#myTable tr').click(function() {
			  $(this).addClass('clicked').siblings().removeClass('clicked');	 
			});		 

<!--Environment-->
			 
			 var sum_get_dev_info = 0;
			 var sum_duration_get_dev_info = 0;
			 var sum_passed_get_dev_info = 0;
			 var sum_failed_get_dev_info = 0;						 			 
			 
			 var sum_power_state_set = 0;
			 var sum_duration_power_state_set = 0;
			 var sum_passed_power_state_set = 0;
			 var sum_failed_power_state_set = 0;		
			 
			 var sum_sleep_mode = 0;
			 var sum_duration_sleep_mode = 0;
			 var sum_passed_sleep_mode = 0;
			 var sum_failed_sleep_mode = 0;	

			 var sum_get_udid = 0;
			 var sum_duration_get_udid = 0;
			 var sum_passed_get_udid = 0;
			 var sum_failed_get_udid = 0;				 
			 
			 var sum_get_version = 0;
			 var sum_duration_get_version = 0;
			 var sum_passed_get_version = 0;
			 var sum_failed_get_version = 0;	
			 
			 var sum_get_all_versions = 0;
			 var sum_duration_get_all_versions = 0;
			 var sum_passed_get_all_versions = 0;
			 var sum_failed_get_all_versions = 0;	
			 
			 var sum_get_soc_version = 0;
			 var sum_duration_get_soc_version = 0;
			 var sum_passed_get_soc_version = 0;
			 var sum_failed_get_soc_version = 0;	
			 
			 var sum_total_temp = 0;
			 var sum_duration_temp = 0;
			 var sum_passed_temp = 0;
			 var sum_failed_temp = 0;	
			 
			 var sum_total_motion = 0;
			 var sum_duration_motion = 0;
			 var sum_passed_motion = 0;
			 var sum_failed_motion = 0;	
			 
			 var sum_total_flipup = 0;
			 var sum_duration_flipup = 0;
			 var sum_passed_flipup = 0;
			 var sum_failed_flipup = 0;	
			 
			 var sum_data_collector = 0;
			 var sum_duration_data_collector = 0;
			 var sum_passed_data_collector = 0;
			 var sum_failed_data_collector = 0;
			 
			 var sum_fan_mode_ctrl = 0;
			 var sum_duration_fan_mode_ctrl = 0;
			 var sum_passed_fan_mode_ctrl = 0;
			 var sum_failed_fan_mode_ctrl = 0;			 			 
			 
			 var sum_total_other = 0;
			 var sum_duration_other = 0;
			 var sum_passed_other = 0;
			 var sum_failed_other = 0;	
			 
			 var sum_total_fake_detection = 0;
			 var sum_duration_fake_detection = 0;
			 var sum_passed_fake_detection = 0;
			 var sum_failed_fake_detection = 0;
			 
			 var table = document.getElementById("myTable");
			 var rows = table.getElementsByTagName("tr");									 
			 for (var i = 1; i < rows.length; i++) {					
				strCommand = rows[i].cells[1].innerHTML.toLowerCase();
				strResult = rows[i].cells[2].innerHTML.toLowerCase();
				strDuration = rows[i].cells[4].innerHTML.toLowerCase();
				//get_dev_info
				if (strCommand.indexOf("get_dev_info")>=0) {
					sum_get_dev_info++;	
					sum_duration_get_dev_info+= parseInt(strDuration);
				    if(strResult=="passed"){
						sum_passed_get_dev_info++;
					}
					else{
						sum_failed_get_dev_info++;
					}					
				}
				else if (strCommand.indexOf("power_state_set")>=0) {
					sum_power_state_set++;	
					sum_duration_power_state_set+= parseInt(strDuration);
				    if(strResult=="passed"){
						sum_passed_power_state_set++;
					}
					else{
						sum_failed_power_state_set++;
					}					
				}
				else if (strCommand.indexOf("sleep_mode")>=0) {
					sum_sleep_mode++;	
					sum_duration_sleep_mode+= parseInt(strDuration);
				    if(strResult=="passed"){
						sum_passed_sleep_mode++;
					}
					else{
						sum_failed_sleep_mode++;
					}					
				}
				else if (strCommand.indexOf("get_udid")>=0) {
					sum_get_udid++;	
					sum_duration_get_udid+= parseInt(strDuration);
				    if(strResult=="passed"){
						sum_passed_get_udid++;
					}
					else{
						sum_failed_get_udid++;
					}					
				}
				else if (strCommand.indexOf("get_version")>=0) {
					sum_get_version++;	
					sum_duration_get_version+= parseInt(strDuration);
				    if(strResult=="passed"){
						sum_passed_get_version++;
					}
					else{
						sum_failed_get_version++;
					}					
				}
				else if (strCommand.indexOf("get_all_versions")>=0) {
					sum_get_all_versions++;	
					sum_duration_get_all_versions+= parseInt(strDuration);
				    if(strResult=="passed"){
						sum_passed_get_all_versions++;
					}
					else{
						sum_failed_get_all_versions++;
					}					
				}
				else if (strCommand.indexOf("get_soc_version")>=0) {
					sum_get_soc_version++;	
					sum_duration_get_soc_version+= parseInt(strDuration);
				    if(strResult=="passed"){
						sum_passed_get_soc_version++;
					}
					else{
						sum_failed_get_soc_version++;
					}					
				}
				else if (strCommand.indexOf("data_collector")>=0) {
					sum_data_collector++;	
					sum_duration_data_collector+= parseInt(strDuration);
				    if(strResult=="passed"){
						sum_passed_data_collector++;
					}
					else{
						sum_failed_data_collector++;
					}					
				}
				else if (strCommand.indexOf("fan_mode_ctrl")>=0) {
					sum_fan_mode_ctrl++;	
					sum_duration_fan_mode_ctrl+= parseInt(strDuration);
				    if(strResult=="passed"){
						sum_passed_fan_mode_ctrl++;
					}
					else{
						sum_failed_fan_mode_ctrl++;
					}					
				}				
														
				if (strResult == "passed") {
					rows[i].cells[2].style.color = "#109c29";
				}
				else{
					rows[i].style.color = "#ff1a1a";
				}
				
				rows[i].cells[4].innerHTML = numberWithCommas(rows[i].cells[4].innerHTML);
			 }
			 var sum_run = sum_get_dev_info 
			 			 + sum_power_state_set
			 			 + sum_sleep_mode
			 			 + sum_get_udid
			 			 + sum_get_version
			 			 + sum_get_all_versions
			 			 + sum_get_soc_version
			 			 + sum_data_collector
			 			 + sum_fan_mode_ctrl;
			 var sum_passed = sum_passed_get_udid
			 				+ sum_passed_get_version
			 				+ sum_passed_power_state_set
			 				+ sum_passed_get_dev_info
			 				+ sum_passed_sleep_mode
			 				+ sum_passed_fan_mode_ctrl
			 				+ sum_passed_data_collector
			 				+ sum_passed_get_all_versions
			 				+ sum_passed_get_soc_version
			 var sum_failed = sum_failed_get_udid
			 				+ sum_failed_get_version
			 				+ sum_failed_power_state_set
			 				+ sum_failed_get_dev_info
			 				+ sum_failed_sleep_mode
			 				+ sum_failed_fan_mode_ctrl
			 				+ sum_failed_data_collector
			 				+ sum_failed_get_all_versions
			 				+ sum_failed_get_soc_version
			 var sum_duration = sum_duration_get_udid
								+ sum_duration_get_version
								+ sum_duration_power_state_set
								+ sum_duration_get_dev_info
								+ sum_duration_sleep_mode
								+ sum_duration_fan_mode_ctrl
								+ sum_duration_data_collector
								+ sum_duration_get_all_versions
								+ sum_duration_get_soc_version;
			 var avg_duration_get_udid = Math.round(sum_duration_get_udid / sum_get_udid);
			 var avg_duration_get_version = Math.round(sum_duration_get_version / sum_get_version);
			 var avg_duration_power_state_set = Math.round(sum_duration_power_state_set / sum_power_state_set);
			 var avg_duration_get_dev_info = Math.round(sum_duration_get_dev_info / sum_get_dev_info);
			 var avg_duration_sleep_mode = Math.round(sum_duration_sleep_mode / sum_sleep_mode);
			 var avg_duration_fan_mode_ctrl = Math.round(sum_duration_fan_mode_ctrl / sum_fan_mode_ctrl);
			 var avg_duration_data_collector = Math.round(sum_duration_data_collector / sum_data_collector);
			 var avg_duration_get_all_versions = Math.round(sum_duration_get_all_versions / sum_get_all_versions);
			 var avg_duration_get_soc_version = Math.round(sum_duration_get_soc_version / sum_get_soc_version);
			 
			 var sum_rate = sum_passed / sum_run * 100;
				
			 $('#fwVer').html(fwVer);
			 $('#exeDate').html(exeDate);
			 $('#cmdFile').html(cmdFile);
			 $('#camModel').html(camModel);	
			 $('#testSite').html(testSite);	
			 
			 $('#sum_get_dev_info').html(sum_get_dev_info);
			 $('#sum_passed_get_dev_info').html(sum_passed_get_dev_info);
			 $('#sum_failed_get_dev_info').html(numberFailedWithCommasColor(sum_failed_get_dev_info));
			 $('#sum_duration_get_dev_info').html(numberWithCommas(sum_duration_get_dev_info));
			 $('#avg_duration_get_dev_info').html(numberWithCommas(avg_duration_get_dev_info));
			 $('#sum_success_get_dev_info').html(numberWithCommasColor(sum_passed_get_dev_info*100/sum_get_dev_info));
			 
			 $('#sum_power_state_set').html(sum_power_state_set);
			 $('#sum_passed_power_state_set').html(sum_passed_power_state_set);
			 $('#sum_failed_power_state_set').html(numberFailedWithCommasColor(sum_failed_power_state_set));
			 $('#sum_duration_power_state_set').html(numberWithCommas(sum_duration_power_state_set));
			 $('#avg_duration_power_state_set').html(numberWithCommas(avg_duration_power_state_set));
			 $('#sum_success_power_state_set').html(numberWithCommasColor(sum_passed_power_state_set*100/sum_power_state_set));
			 
			 $('#sum_sleep_mode').html(sum_sleep_mode);
			 $('#sum_passed_sleep_mode').html(sum_passed_sleep_mode);
			 $('#sum_failed_sleep_mode').html(numberFailedWithCommasColor(sum_failed_sleep_mode));
			 $('#sum_duration_sleep_mode').html(numberWithCommas(sum_duration_sleep_mode));
			 $('#avg_duration_sleep_mode').html(numberWithCommas(avg_duration_sleep_mode));
			 $('#sum_success_sleep_mode').html(numberWithCommasColor(sum_passed_sleep_mode*100/sum_sleep_mode));
			 
			 $('#sum_get_udid').html(sum_get_udid);
			 $('#sum_passed_get_udid').html(sum_passed_get_udid);
			 $('#sum_failed_get_udid').html(numberFailedWithCommasColor(sum_failed_get_udid));
			 $('#sum_duration_get_udid').html(numberWithCommas(sum_duration_get_udid));
			 $('#avg_duration_get_udid').html(numberWithCommas(avg_duration_get_udid));
			 $('#sum_success_get_udid').html(numberWithCommasColor(sum_passed_get_udid*100/sum_get_udid));
			 
			 $('#sum_get_version').html(sum_get_version); 
			 $('#sum_passed_get_version').html(sum_passed_get_version);
			 $('#sum_failed_get_version').html(numberFailedWithCommasColor(sum_failed_get_version));
			 $('#sum_duration_get_version').html(numberWithCommas(sum_duration_get_version));
			 $('#avg_duration_get_version').html(numberWithCommas(avg_duration_get_version));
			 $('#sum_success_get_version').html(numberWithCommasColor(sum_passed_get_version*100/sum_get_version));
			 
			 $('#sum_get_all_versions').html(sum_get_all_versions);
			 $('#sum_passed_get_all_versions').html(sum_passed_get_all_versions);
			 $('#sum_failed_get_all_versions').html(numberFailedWithCommasColor(sum_failed_get_all_versions));
			 $('#sum_duration_get_all_versions').html(numberWithCommas(sum_duration_get_all_versions));
			 $('#avg_duration_get_all_versions').html(numberWithCommas(avg_duration_get_all_versions));
			 $('#sum_success_get_all_versions').html(numberWithCommasColor(sum_passed_get_all_versions*100/sum_get_all_versions));
			 
			 $('#sum_get_soc_version').html(sum_get_soc_version);
			 $('#sum_passed_get_soc_version').html(sum_passed_get_soc_version);
			 $('#sum_failed_get_soc_version').html(numberFailedWithCommasColor(sum_failed_get_soc_version));
			 $('#sum_duration_get_soc_version').html(numberWithCommas(sum_duration_get_soc_version));
			 $('#avg_duration_get_soc_version').html(numberWithCommas(avg_duration_get_soc_version));
			 $('#sum_success_get_soc_version').html(numberWithCommasColor(sum_passed_get_soc_version*100/sum_get_soc_version));
			 
			 $('#sum_data_collector').html(sum_data_collector);
			 $('#sum_passed_data_collector').html(sum_passed_data_collector);
			 $('#sum_failed_data_collector').html(numberFailedWithCommasColor(sum_failed_data_collector));
			 $('#sum_duration_data_collector').html(numberWithCommas(sum_duration_data_collector));
			 $('#avg_duration_data_collector').html(numberWithCommas(avg_duration_data_collector));
			 $('#sum_success_data_collector').html(numberWithCommasColor(sum_passed_data_collector*100/sum_data_collector));
			 
			 $('#sum_fan_mode_ctrl').html(sum_fan_mode_ctrl);
			 $('#sum_passed_fan_mode_ctrl').html(sum_passed_fan_mode_ctrl);
			 $('#sum_failed_fan_mode_ctrl').html(numberFailedWithCommasColor(sum_failed_fan_mode_ctrl));
			 $('#sum_duration_fan_mode_ctrl').html(numberWithCommas(sum_duration_fan_mode_ctrl));
			 $('#avg_duration_fan_mode_ctrl').html(numberWithCommas(avg_duration_fan_mode_ctrl));
			 $('#sum_success_fan_mode_ctrl').html(numberWithCommasColor(sum_passed_fan_mode_ctrl*100/sum_fan_mode_ctrl));			 			
			 			 
			 $('#sum_run').html(sum_run);
			 $('#sum_passed').html(sum_passed);
			 $('#sum_failed').html(numberFailedWithCommasColor(sum_failed));
			 $('#sum_duration').html(sum_duration);
			 $('#sum_rate').html(numberWithCommasColor(sum_rate));
         });
               
         function myFormat(){
          
         }
		 
		 function setClipboard(e){								
			copyToClipboard($(e).parent().parent().find("td:eq(6)"));		
		 }
	 
		function copyToClipboard(element) {
		    var $temp = $("<input>");
		    $("body").append($temp);
		    $temp.val($(element).text()).select();
		    document.execCommand("copy");
		    $temp.remove();
		}

	   function myFunction() {
		 // Declare variables 
		 var input, filter, table, tr, td, i;
		 input = document.getElementById("myInput");
		 inputResult = document.getElementById("myInputResult");
		 filter = input.value.toUpperCase();
		 filterResult = inputResult.value.toUpperCase();
		 table = document.getElementById("myTable");
		 tr = table.getElementsByTagName("tr");
	   
		 // Loop through all table rows, and hide those who don't match the search query
		 for (i = 0; i < tr.length; i++) {
		td = tr[i].getElementsByTagName("td")[1];
		tdResult = tr[i].getElementsByTagName("td")[2];
		if (td) {
		  if (td.innerHTML.toUpperCase().indexOf(filter) > -1 && tdResult.innerHTML.toUpperCase().indexOf(filterResult) > -1) {
			tr[i].style.display = "";
		  } else {
			tr[i].style.display = "none";
		  }
		} 
		 }		   		   
	   }		
         
          function numberWithCommas(x) {
                 return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
          }           
		  
		  function numberWithCommasColor(x) {	
		   x = Math.round(x);
           if (x == 100)
               return "<span style='color:green;font-weight:bold;'>" + x.toString() + "%</span>";           
		   else if(x >= 0 && x <= 99)
			   return "<span style='color:black;font-weight:bold;'>" + x.toString() + "%</span>";
		   else
			   return "";
		 }
		 
		 function numberFailedWithCommasColor(x) {			  
           if (x > 0)
               return "<span style='color:red;font-weight:bold;'>" + x.toString() + "</span>";          
		   else
			   return x;
		 }		 		 	
      </script>
   </head>
   <body>
      <h1 style="text-align:center;color:#264192;">TEST REPORT</h1>
      <hr style="width:300px;align:left;">
      <h3>
		Environment:  
	  </h3>
	  <table style="padding-bottom:100px;" id="mySummary">
		 <tr>
			<th>Date</th>
			 <td id="exeDate">2019-07-31 09:57:19.563</td>
         </tr>
         <tr>
             <th>Fw version</th>         
			 <td id="fwVer">00.00.17</td>
		 </tr>
		 <tr>
			<th>Command file</th>
			 <td id="cmdFile">test-data/AirPurifier_commands.txt</td>	 
		 </tr>
		 <tr>
            <th>Device ID</th>
			 <td id="camModel">000015E048AF00009FTAMNGF</td>
		 </tr>
		 <tr>
            <th>Test site</th>
			 <td id="testSite">ssl://mqtt-t03-r2.perimetersafe.com:8895 | khaitest3/123456Aa</td>
		 </tr>
	  </table>

      <h3>
      Summary:
      </h3>
      <table style="padding-bottom:100px;" id="mySummary">
         <tr class="header">
            <th>Function</th>
            <th>Total Run</th>
            <th>Passed</th>
            <th>Failed</th>
            <th>Duration (ms)</th>
            <th>Average exec time (ms)</th>
			<th>Success Rate</th>
         </tr>
		 <tr>
            <td style="text-align: left;">data_collector</td>
            <td id="sum_data_collector">0</td>
            <td id="sum_passed_data_collector">0</td>
            <td id="sum_failed_data_collector">0</td>
            <td id="sum_duration_data_collector">0</td>
            <td id="avg_duration_data_collector">0</td>
			<td id="sum_success_data_collector"></td>
         </tr>
		 <tr>
            <td style="text-align: left;">fan_mode_ctrl</td>
            <td id="sum_fan_mode_ctrl">0</td>
            <td id="sum_passed_fan_mode_ctrl">0</td>
            <td id="sum_failed_fan_mode_ctrl">0</td>
            <td id="sum_duration_fan_mode_ctrl">0</td>
            <td id="avg_duration_fan_mode_ctrl">0</td>            
			<td id="sum_success_fan_mode_ctrl"></td>
         </tr>		
         <tr>
            <td style="text-align: left;">get_dev_info</td>
            <td id="sum_get_dev_info">0</td>
            <td id="sum_passed_get_dev_info">0</td>
            <td id="sum_failed_get_dev_info">0</td>
            <td id="sum_duration_get_dev_info">0</td>
            <td id="avg_duration_get_dev_info">0</td>
			<td id="sum_success_get_dev_info"></td>
         </tr>
		<tr>
            <td style="text-align: left;">power_state_set</td>
            <td id="sum_power_state_set">0</td>
            <td id="sum_passed_power_state_set">0</td>
            <td id="sum_failed_power_state_set">0</td>
            <td id="sum_duration_power_state_set">0</td>
            <td id="avg_duration_power_state_set">0</td>
			<td id="sum_success_power_state_set"></td>
         </tr>
		 <tr>
            <td style="text-align: left;">sleep_mode</td>
            <td id="sum_sleep_mode">0</td>
            <td id="sum_passed_sleep_mode">0</td>
            <td id="sum_failed_sleep_mode">0</td>
            <td id="sum_duration_sleep_mode">0</td>
            <td id="avg_duration_sleep_mode">0</td>
			<td id="sum_success_sleep_mode"></td>
         </tr>
		 <tr>
			<td style="text-align: left;">get_udid</td>
			<td id="sum_get_udid">0</td>
			<td id="sum_passed_get_udid">0</td>
			<td id="sum_failed_get_udid">0</td>
			<td id="sum_duration_get_udid">0</td>
			<td id="avg_duration_get_udid">0</td>
			<td id="sum_success_get_udid"></td>
		 </tr>
		 <tr>
			<td style="text-align: left;">get_version</td>
			<td id="sum_get_version">0</td>
			<td id="sum_passed_get_version">0</td>
			<td id="sum_failed_get_version">0</td>
			<td id="sum_duration_get_version">0</td>
			<td id="avg_duration_get_version">0</td>
			<td id="sum_success_get_version"></td>
		 </tr>
		 <tr>
			<td style="text-align: left;">get_all_versions</td>
			<td id="sum_get_all_versions">0</td>
			<td id="sum_passed_get_all_versions">0</td>
			<td id="sum_failed_get_all_versions">0</td>
			<td id="sum_duration_get_all_versions">0</td>
			<td id="avg_duration_get_all_versions">0</td>
			<td id="sum_success_get_all_versions"></td>
		 </tr>
		 <tr>
			<td style="text-align: left;">get_soc_version</td>
			<td id="sum_get_soc_version">0</td>
			<td id="sum_passed_get_soc_version">0</td>
			<td id="sum_failed_get_soc_version">0</td>
			<td id="sum_duration_get_soc_version">0</td>
			<td id="avg_duration_get_soc_version">0</td>
			<td id="sum_success_get_soc_version"></td>
		 </tr>
		 
		 <tr class="header">
			 <th>TOTAL</th>
			 <th id="sum_run">170</th>
			 <th id="sum_passed">159</th>
			 <th id="sum_failed"><span style="color:red;font-weight:bold;">11</span></th>
			 <th id="sum_duration">_</th>
			 <th>_</th>
			 <th id="sum_rate"><span style="color:black;font-weight:bold;">94%</span></th>
		</tr>
      </table>
      <h3>
      Detail:
      </h3>
      <input type="text" id="myInput" onkeyup="myFunction()" placeholder="Search for commands..">
      <input type="text" id="myInputResult" onkeyup="myFunction()" placeholder="Search for result..">
      <table id="myTable">
         <tr class="header">
            <th>#</th>
            <th>Command</th>            
            <th>Result</th>
            <th>StartTime</th>
            <th>Duration (ms)</th>
            <th>Expected result</th>
            <th>Actual result</th>			
			<th></th>
            <th>Log</th>	
         </tr>
         <!--Details-->
      </table>      
   </body>
</html>
